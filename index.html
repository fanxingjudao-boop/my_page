<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>山田太郎 | Professional Experience Design</title>
  <meta name="description" content="視認性と操作性に優れ、課題と解決策を視覚化するプロ仕様のトップページ。" />
  <style>
    :root {
      --bg: #f4f7fb;
      --panel: #ffffff;
      --text: #10233f;
      --muted: #445b7a;
      --accent: #005fcc;
      --accent-soft: #e8f1ff;
      --ok: #0b8f57;
      --warn: #b26a00;
      --border: #c6d5eb;
      --max: 1160px;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(9, 36, 78, 0.08);
      --base-size: 19px;
    }
    body.hc {
      --bg: #ffffff;
      --panel: #ffffff;
      --text: #000;
      --muted: #111;
      --accent: #003d99;
      --accent-soft: #dce9ff;
      --border: #222;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: "Noto Sans JP", "Hiragino Sans", system-ui, sans-serif;
      font-size: var(--base-size);
      line-height: 1.85;
      color: var(--text);
      background: radial-gradient(900px 500px at 90% -15%, #eaf2ff, transparent), var(--bg);
    }
    body::before,
    body::after {
      content: "";
      position: fixed;
      width: 440px;
      height: 440px;
      border-radius: 50%;
      pointer-events: none;
      z-index: -1;
      filter: blur(40px);
      opacity: 0.45;
      animation: drift 18s ease-in-out infinite alternate;
    }
    body::before { top: -140px; right: -100px; background: rgba(0, 95, 204, 0.18); }
    body::after { bottom: -170px; left: -130px; background: rgba(11, 143, 87, 0.12); animation-delay: 3s; }
    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; height: auto; display: block; }
    .container { width: min(var(--max), calc(100% - 36px)); margin: 0 auto; }
    .skip { position: absolute; left: -9999px; }
    .skip:focus { left: 8px; top: 8px; background: #000; color:#fff; padding: 8px 12px; border-radius: 8px; z-index:9999; }

    header {
      position: sticky; top: 0; z-index: 1000; background: rgba(255,255,255,.9);
      backdrop-filter: blur(8px); border-bottom: 2px solid transparent; transition: .2s ease;
    }
    header.scrolled { border-color: var(--border); }
    .nav { min-height: 76px; display: flex; align-items:center; justify-content: space-between; gap: 14px; }
    .brand { font-weight: 800; font-size: 20px; letter-spacing: .02em; }
    .links { display: flex; gap: 18px; flex-wrap: wrap; }
    .links a { color: var(--muted); font-weight: 700; padding: 8px 10px; border-radius: 10px; transition: transform .25s ease, background-color .25s ease, color .25s ease; }
    .links a:hover, .links a.active { background: var(--accent-soft); color: var(--accent); }
    .links a:hover { transform: translateY(-1px); }

    .ui-tools { display:flex; gap:8px; flex-wrap: wrap; }
    .tool-btn, .btn {
      min-height: 48px; min-width: 48px; padding: 10px 14px; border-radius: 10px;
      border: 2px solid var(--border); background: #fff; color: var(--text); font-weight: 700; cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: transform .24s ease, box-shadow .24s ease, border-color .24s ease, background-color .24s ease;
    }
    .tool-btn::after, .btn::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.85) 48%, transparent 100%);
      transform: translateX(-120%);
      transition: transform .55s ease;
    }
    .tool-btn:hover::after, .btn:hover::after { transform: translateX(120%); }
    .tool-btn:hover, .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 18px rgba(9, 36, 78, 0.12); }
    .tool-btn:active, .btn:active { transform: translateY(0); }
    .tool-btn[aria-pressed="true"] { background: var(--accent-soft); border-color: var(--accent); color: var(--accent); }
    .tool-btn:focus-visible,
    .btn:focus-visible,
    .chip:focus-visible,
    .faq-q:focus-visible,
    .links a:focus-visible {
      outline: 3px solid color-mix(in srgb, var(--accent) 70%, white);
      outline-offset: 2px;
    }

    .hero { padding: 64px 0 36px; position: relative; overflow: hidden; }
    .hero::before,
    .hero::after {
      content: "";
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      opacity: .55;
    }
    .hero::before {
      width: 320px;
      height: 320px;
      right: -120px;
      top: -80px;
      background: radial-gradient(circle at 30% 30%, rgba(0,95,204,.25), transparent 70%);
      animation: floatY 8s ease-in-out infinite;
    }
    .hero::after {
      width: 260px;
      height: 260px;
      left: -100px;
      bottom: -120px;
      background: radial-gradient(circle at 60% 40%, rgba(11,143,87,.18), transparent 70%);
      animation: floatY 10s ease-in-out infinite reverse;
    }
    .hero-grid { display:grid; grid-template-columns: 1.1fr .9fr; gap: 18px; align-items: start; }
    .hero-visual { display:grid; gap: 12px; align-content:start; }
    .video-shell {
      border-radius: 14px;
      overflow: hidden;
      border: 2px solid var(--border);
      box-shadow: var(--shadow);
      position: relative;
      background: #0b1324;
      aspect-ratio: 16 / 9;
      isolation: isolate;
    }
    .video-shell::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, rgba(5,11,24,0.05) 25%, rgba(5,11,24,0.55) 100%);
      z-index: 2;
      pointer-events: none;
    }
    .video-fallback {
      position: absolute;
      inset: 0;
      background: linear-gradient(145deg, #0b1630 0%, #113259 52%, #0f6a74 100%);
      transform: scale(1.06);
      animation: fallbackPan 22s ease-in-out infinite alternate;
      z-index: 0;
      opacity: 0;
      transition: opacity .45s ease;
      overflow: hidden;
    }
    .video-fallback::before,
    .video-fallback::after {
      content: "";
      position: absolute;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.24);
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(2px);
    }
    .video-fallback::before {
      width: 52%;
      height: 52%;
      top: 14%;
      left: 10%;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.12);
      animation: panelFloat 14s ease-in-out infinite;
    }
    .video-fallback::after {
      width: 34%;
      height: 34%;
      right: 11%;
      bottom: 12%;
      animation: panelFloat 18s ease-in-out infinite reverse;
    }
    .video-shell.is-fallback .video-fallback { opacity: 1; }
    .video-shell.is-fallback video { opacity: 0; }

    .video-shell.is-fallback::after {
      content: "課題分析 → UX設計 → 実装 → 改善";
      position: absolute;
      left: 14px;
      bottom: 12px;
      z-index: 2;
      color: rgba(255,255,255,.92);
      font-size: 14px;
      letter-spacing: .04em;
      font-weight: 700;
      text-shadow: 0 2px 10px rgba(0,0,0,.35);
    }

    .video-shell video {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      filter: saturate(1.06) contrast(1.03);
      transform: scale(1.01);
      display: block;
    }
    .video-chip {
      position: absolute;
      top: 12px;
      left: 12px;
      z-index: 2;
      font-size: 14px;
      font-weight: 700;
      color: #fff;
      background: rgba(16, 35, 63, 0.72);
      border: 1px solid rgba(255,255,255,.35);
      padding: 6px 10px;
      border-radius: 999px;
      backdrop-filter: blur(8px);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .video-chip::before {
      content: "";
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: #ff5d73;
      box-shadow: 0 0 0 rgba(255,93,115,.65);
      animation: pulse 1.8s ease-out infinite;
    }
    .model-shell {
      border-radius: 14px;
      border: 2px solid var(--border);
      background: linear-gradient(160deg, #f2f7ff 0%, #ecf6f2 100%);
      box-shadow: var(--shadow);
      min-height: 240px;
      position: relative;
      overflow: hidden;
      isolation: isolate;
    }
    .model-shell::after {
      content: "3D Preview";
      position: absolute;
      bottom: 12px;
      right: 12px;
      font-size: 13px;
      color: var(--muted);
      font-weight: 700;
      letter-spacing: .04em;
    }
    model-viewer {
      width: 100%;
      height: 240px;
      --poster-color: transparent;
      background: transparent;
    }
    .card { background: var(--panel); border: 2px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); padding: 20px; transition: transform .28s ease, box-shadow .28s ease, border-color .28s ease; }
    .card:hover { transform: translateY(-3px); box-shadow: 0 16px 28px rgba(9, 36, 78, 0.14); border-color: color-mix(in srgb, var(--accent) 20%, var(--border)); }
    .label { display:inline-block; font-size: 16px; font-weight: 700; background: var(--accent-soft); color: var(--accent); padding: 8px 12px; border-radius: 999px; }
    h1 { margin: 12px 0 14px; line-height: 1.25; font-size: clamp(30px, 5vw, 50px); }
    .lead { color: var(--muted); }
    .cta { display:flex; gap: 10px; flex-wrap: wrap; margin-top: 18px; }
    .btn.primary { background: var(--accent); border-color: var(--accent); color: #fff; }
    .hero-metrics { margin-top: 12px; }

    section { padding: 26px 0; }
    h2 { margin: 0 0 14px; font-size: clamp(26px, 4vw, 36px); }
    .sub { margin: 0 0 16px; color: var(--muted); font-size: 18px; }

    .grid-3 { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 12px; }
    .grid-4 { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 12px; }

    .metric b { font-size: 34px; color: var(--ok); display:block; line-height: 1.2; }
    .metric span { color: var(--muted); font-size: 17px; }

    .flow { display:grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 12px; }
    .flow .card { position:relative; }
    .flow .card::before {
      content: attr(data-step); position:absolute; top:10px; right:12px; font-weight: 800; color: var(--accent);
    }
    .pain { border-left: 8px solid var(--warn); }
    .solve { border-left: 8px solid var(--accent); }
    .effect { border-left: 8px solid var(--ok); }

    .project img { border-radius: 10px; margin-bottom: 10px; aspect-ratio: 16/10; object-fit: cover; }
    .chips { display:flex; gap:8px; flex-wrap: wrap; margin-bottom: 10px; }
    .chip { border: 2px solid var(--border); background: #fff; color: var(--muted); border-radius: 999px; padding: 10px 14px; cursor:pointer; min-height: 48px; font-size: 17px; transition: transform .2s ease, border-color .2s ease, background-color .2s ease; }
    .chip:hover { transform: translateY(-1px); }
    .chip.active { background: var(--accent-soft); color: var(--accent); border-color: var(--accent); }

    .faq-item + .faq-item { margin-top: 8px; }
    .faq-q { width:100%; text-align:left; background:#fff; border:2px solid var(--border); border-radius:10px; padding: 16px; font-size: 20px; font-weight: 700; cursor:pointer; transition: border-color .2s ease, background-color .2s ease; }
    .faq-item.open .faq-q { border-color: var(--accent); background: color-mix(in srgb, var(--accent-soft) 60%, #fff); }
    .faq-a { display:none; padding: 12px 14px 8px; color: var(--muted); font-size: 18px; }
    .faq-item.open .faq-a { display:block; }

    .contact { display:flex; justify-content: space-between; gap: 12px; align-items: center; }

    footer { padding: 20px 0 40px; color: var(--muted); }

    .modal { position: fixed; inset: 0; background: rgba(0,0,0,.48); display:none; place-items:center; z-index:2000; backdrop-filter: blur(2px); }
    .modal.open { display:grid; }
    .modal-panel { width:min(760px,calc(100% - 24px)); background:#fff; border-radius: 14px; border:2px solid var(--border); padding:16px; transform: translateY(16px) scale(.98); opacity: 0; transition: transform .28s ease, opacity .28s ease; }
    .modal.open .modal-panel { transform: translateY(0) scale(1); opacity: 1; }
    .modal-panel img { border-radius: 10px; margin-bottom: 8px; }

    .reveal { opacity: 0; transform: translateY(20px); transition: opacity .6s ease, transform .6s ease; }
    .reveal.in { opacity: 1; transform: translateY(0); }

    @keyframes drift {
      0% { transform: translate3d(0, 0, 0) scale(1); }
      100% { transform: translate3d(18px, -22px, 0) scale(1.06); }
    }
    @keyframes floatY {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-14px); }
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255,93,115,.65); }
      70% { box-shadow: 0 0 0 8px rgba(255,93,115,0); }
      100% { box-shadow: 0 0 0 0 rgba(255,93,115,0); }
    }
    @keyframes fallbackPan {
      0% { transform: scale(1.04) translate3d(0,0,0); filter: saturate(1.02) brightness(1); }
      50% { transform: scale(1.07) translate3d(-1.1%, -0.7%, 0); filter: saturate(1.1) brightness(1.05); }
      100% { transform: scale(1.04) translate3d(0,0,0); filter: saturate(1.02) brightness(1); }
    }
    @keyframes panelFloat {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    @media (max-width: 1000px) {
      .hero-grid, .flow { grid-template-columns: 1fr; }
      .grid-4 { grid-template-columns: repeat(2,minmax(0,1fr)); }
      .grid-3 { grid-template-columns: repeat(2,minmax(0,1fr)); }
    }
    @media (max-width: 680px) {
      .links { display:none; }
      .grid-4, .grid-3 { grid-template-columns: 1fr; }
      .contact { flex-direction: column; align-items: stretch; }
      .container { width: calc(100% - 24px); }
      .tool-btn, .btn, .chip { width: 100%; }
      .ui-tools { width: 100%; }
      .ui-tools .tool-btn { width: calc(50% - 4px); }
    }
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
      html { scroll-behavior: auto; }
      .reveal { opacity: 1; transform: none; }
    }
  </style>
</head>
<body>
  <a href="#main" class="skip">本文へスキップ</a>

  <header id="header">
    <div class="container nav">
      <a href="#hero" class="brand">Taro Yamada Studio</a>
      <nav class="links" aria-label="セクションメニュー">
        <a href="#why">なぜ改善が必要か</a>
        <a href="#solution">どう解決するか</a>
        <a href="#projects">実績</a>
        <a href="#faq">FAQ</a>
        <a href="#contact">相談</a>
      </nav>
      <div class="ui-tools" aria-label="表示補助">
        <button class="tool-btn" id="fontBtn" aria-pressed="false">文字を大きく</button>
        <button class="tool-btn" id="contrastBtn" aria-pressed="false">高コントラスト</button>
      </div>
    </div>
  </header>

    <section id="hero" class="hero reveal">
    <div class="container hero-grid">
      <div class="card">
        <span class="label">Professional / Accessible / Conversion</span>
        <h1>最新の表現技術で、
          <br>情報を美しく、直感的に伝える。</h1>
        <p class="lead">実写映像・3Dビジュアル・繊細なUIアニメーションを統合し、最初の3秒で「品質が違う」と感じるトップページへ。視覚訴求と操作性を両立し、成果までの導線を滑らかに最短化します。</p>
        <div class="cta">
          <a href="#solution" class="btn primary">解決策を見る</a>
          <a href="#projects" class="btn">最新事例を見る</a>
        </div>
      </div>
      <aside class="hero-visual">
        <div class="video-shell" id="video-shell" aria-label="ブランドイメージ映像" data-state="loading">
          <span class="video-chip" id="video-chip">LIVE CINEMATIC</span>
          <div class="video-fallback" aria-hidden="true"></div>
          <video id="hero-video" autoplay muted loop playsinline preload="auto" poster="img/hero-background.jpg" webkit-playsinline>
            <source src="https://storage.googleapis.com/coverr-main/mp4/Footboys.mp4" type="video/mp4" />
          </video>
        </div>
        <div class="model-shell" aria-label="3Dイメージプレビュー">
          <model-viewer src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" camera-controls auto-rotate auto-rotate-delay="0" shadow-intensity="1" exposure="1.1" alt="3D model preview"></model-viewer>
        </div>
      </aside>
    </div>
    <div class="container hero-metrics">
      <div class="card">
        <h2 style="font-size:26px;margin-top:0">成果イメージ</h2>
        <p class="sub">初期3ヶ月で目指す変化</p>
        <div class="grid-3">
          <div class="metric"><b data-count="38">0</b><span>問い合わせ増加(%)</span></div>
          <div class="metric"><b data-count="52">0</b><span>離脱率改善(%)</span></div>
          <div class="metric"><b data-count="91">0</b><span>操作完遂率(%)</span></div>
        </div>
      </div>
    </div>
  </section>

  <main id="main" class="container">
    <section id="why" class="reveal">
      <h2>なぜこの設計が良いのか（課題の見える化）</h2>
      <p class="sub">よくある失敗を明確化し、どこでユーザーが困るのかを先に示します。</p>
      <div class="grid-3">
        <article class="card pain"><h3>文字が小さく読みにくい</h3><p>小さな文字や情報密度の高さは、読解負担を増やし途中離脱につながります。</p></article>
        <article class="card pain"><h3>どこを押せばよいか不明</h3><p>導線が曖昧だと、目的行動（相談・問い合わせ）に進めません。</p></article>
        <article class="card pain"><h3>価値が抽象的で伝わらない</h3><p>「何が解決できるか」が見えないと、信頼形成が進みません。</p></article>
      </div>
    </section>

    <section id="solution" class="reveal">
      <h2>どうすれば解決できるのか（解決策の視覚化）</h2>
      <p class="sub">課題→解決策→成果までを1画面で追える構成にしています。</p>
      <div class="flow">
        <article class="card solve" data-step="STEP 1"><h3>読みやすいUI</h3><p>初期フォント18px、行間1.85、ボタン最小48pxで押しやすさを担保。</p></article>
        <article class="card solve" data-step="STEP 2"><h3>行動導線の明確化</h3><p>各セクションに明確なCTAを配置し、次アクションを迷わせません。</p></article>
        <article class="card solve" data-step="STEP 3"><h3>成果の定量可視化</h3><p>数値・事例・比較で、価値を主観でなく客観で示します。</p></article>
      </div>
      <div class="grid-3" style="margin-top:12px">
        <article class="card effect"><h3>理解速度の向上</h3><p>「何を提供しているか」が短時間で把握できます。</p></article>
        <article class="card effect"><h3>問い合わせ率の向上</h3><p>導線が明確なため、相談までの心理的負担が下がります。</p></article>
        <article class="card effect"><h3>誰にとっても公平な体験</h3><p>視認性・操作性を重視し、利用環境に依存しない体験を実現します。</p></article>
      </div>
    </section>

    <section id="projects" class="reveal">
      <h2>実績（課題と解決の具体例）</h2>
      <div class="chips">
        <button class="chip active" data-filter="all">すべて</button>
        <button class="chip" data-filter="accessibility">視認性最適化</button>
        <button class="chip" data-filter="conversion">CV改善</button>
        <button class="chip" data-filter="branding">ブランド訴求</button>
      </div>
      <div class="grid-3" id="projectList">
        <article class="card project" tabindex="0" role="button" aria-label="公共情報サイト再設計の詳細を開く" data-cat="accessibility" data-title="公共情報サイト再設計" data-desc="文字サイズ調整・高コントラスト・大きなボタンで、手続き完遂率が向上。" data-img="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=1400&q=80"><img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&w=1400&q=80" alt="公共情報サイト再設計"><h3>公共情報サイト再設計</h3><p class="sub">視認性最適化 / 完遂率 +31%</p></article>
        <article class="card project" tabindex="0" role="button" aria-label="B2B相談導線最適化の詳細を開く" data-cat="conversion" data-title="B2B相談導線最適化" data-desc="比較表とCTA再配置で、問い合わせ率を1.9倍に改善。" data-img="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&w=1400&q=80"><img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&w=1400&q=80" alt="B2B相談導線最適化"><h3>B2B相談導線最適化</h3><p class="sub">CV改善 / CVR 1.9x</p></article>
        <article class="card project" tabindex="0" role="button" aria-label="ブランドページ刷新の詳細を開く" data-cat="branding" data-title="ブランドページ刷新" data-desc="価値訴求を課題起点で再構成し、滞在時間を47%改善。" data-img="https://images.unsplash.com/photo-1558655146-d09347e92766?auto=format&fit=crop&w=1400&q=80"><img src="https://images.unsplash.com/photo-1558655146-d09347e92766?auto=format&fit=crop&w=1400&q=80" alt="ブランドページ刷新"><h3>ブランドページ刷新</h3><p class="sub">ブランド訴求 / 滞在 +47%</p></article>
      </div>
    </section>

    <section id="faq" class="reveal">
      <h2>FAQ</h2>
      <div class="faq-item">
        <button class="faq-q" aria-expanded="false">視認性重視のデザインは本当に必要ですか？</button>
        <div class="faq-a"><p>はい。読みやすさと操作しやすさはすべてのユーザー体験を改善し、結果的にCV向上にもつながります。</p></div>
      </div>
      <div class="faq-item">
        <button class="faq-q" aria-expanded="false">現状のmainだけでも改善可能ですか？</button>
        <div class="faq-a"><p>可能です。まずはトップページ改善から着手し、必要に応じて段階的に拡張できます。</p></div>
      </div>
      <div class="faq-item">
        <button class="faq-q" aria-expanded="false">なぜ“課題→解決→成果”を見せるのですか？</button>
        <div class="faq-a"><p>ユーザーの納得形成が早まり、提案の妥当性が直感的に理解されるためです。</p></div>
      </div>
    </section>

    <section id="contact" class="reveal">
      <div class="card contact">
        <div>
          <h2 style="margin:0 0 8px">現状の課題を、具体的に整理しませんか？</h2>
          <p class="sub" style="margin:0">「今のどこが弱いか」「どう直すと成果が出るか」を、初回相談で可視化します。</p>
        </div>
        <a class="btn primary" href="mailto:hello@example.com">無料相談を予約する</a>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">© <span id="year"></span> Taro Yamada Studio / Accessible Professional Interface</div>
  </footer>

  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-panel">
      <button class="btn" id="closeModal">閉じる</button>
      <img id="modalImg" src="" alt="プロジェクト画像" />
      <h3 id="modalTitle"></h3>
      <p id="modalDesc" class="sub"></p>
    </div>
  </div>

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <script>
    const header = document.getElementById('header');
    const links = document.querySelectorAll('.links a');
    const sections = document.querySelectorAll('main section, #hero');
    const revealTargets = document.querySelectorAll('.reveal, .card');

    window.addEventListener('scroll', () => {
      header.classList.toggle('scrolled', window.scrollY > 8);
    });

    const secObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        const id = entry.target.id;
        links.forEach((link) => link.classList.toggle('active', link.getAttribute('href') === `#${id}`));
      });
    }, { threshold: 0.4 });
    sections.forEach((s) => secObserver.observe(s));

    const revealObserver = new IntersectionObserver((entries, obs) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('in');
        obs.unobserve(entry.target);
      });
    }, { threshold: 0.12 });
    revealTargets.forEach((target, i) => {
      target.style.transitionDelay = `${Math.min(i * 16, 220)}ms`;
      revealObserver.observe(target);
    });

    const countObserver = new IntersectionObserver((entries, obs) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        const el = entry.target;
        const target = Number(el.dataset.count || 0);
        let current = 0;
        const step = Math.max(1, Math.ceil(target / 32));
        const timer = setInterval(() => {
          current += step;
          if (current >= target) {
            current = target;
            clearInterval(timer);
          }
          el.textContent = current;
        }, 26);
        obs.unobserve(el);
      });
    }, { threshold: 0.6 });
    document.querySelectorAll('[data-count]').forEach((el) => countObserver.observe(el));

    const chips = document.querySelectorAll('.chip');
    const projects = document.querySelectorAll('.project');
    chips.forEach((chip) => {
      chip.addEventListener('click', () => {
        chips.forEach((c) => c.classList.remove('active'));
        chip.classList.add('active');
        const filter = chip.dataset.filter;
        projects.forEach((p) => {
          p.style.display = (filter === 'all' || p.dataset.cat === filter) ? '' : 'none';
        });
      });
    });

    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalImg = document.getElementById('modalImg');
    const closeBtn = document.getElementById('closeModal');
    let lastFocused = null;
    const openProjectModal = (card) => {
      modalTitle.textContent = card.dataset.title;
      modalDesc.textContent = card.dataset.desc;
      modalImg.src = card.dataset.img;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      lastFocused = document.activeElement;
      closeBtn.focus();
    };
    document.querySelectorAll('.project').forEach((card) => {
      card.addEventListener('click', () => openProjectModal(card));
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openProjectModal(card);
        }
      });
    });
    const closeModal = () => {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
      if (lastFocused) lastFocused.focus();
    };
    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

    document.querySelectorAll('.faq-q').forEach((q) => {
      q.addEventListener('click', () => {
        const item = q.parentElement;
        const open = item.classList.toggle('open');
        q.setAttribute('aria-expanded', String(open));
      });
    });

    const fontBtn = document.getElementById('fontBtn');
    const contrastBtn = document.getElementById('contrastBtn');

    fontBtn.addEventListener('click', () => {
      const large = document.body.classList.toggle('large-font');
      document.documentElement.style.setProperty('--base-size', large ? '22px' : '19px');
      fontBtn.setAttribute('aria-pressed', String(large));
      fontBtn.textContent = large ? '標準サイズに戻す' : '文字を大きく';
    });

    contrastBtn.addEventListener('click', () => {
      const hc = document.body.classList.toggle('hc');
      contrastBtn.setAttribute('aria-pressed', String(hc));
      contrastBtn.textContent = hc ? '標準配色に戻す' : '高コントラスト';
    });

    document.querySelectorAll('.btn, .tool-btn').forEach((btn) => {
      btn.addEventListener('pointermove', (e) => {
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
        const rect = btn.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width - 0.5) * 5;
        const y = ((e.clientY - rect.top) / rect.height - 0.5) * 5;
        btn.style.transform = `translate(${x}px, ${y}px)`;
      });
      btn.addEventListener('pointerleave', () => {
        btn.style.transform = '';
      });
    });

    const heroVideo = document.getElementById('hero-video');
    const videoShell = document.getElementById('video-shell');
    const videoChip = document.getElementById('video-chip');
    if (heroVideo && videoShell) {
      let hasStarted = false
      const activateFallback = () => {
        if (videoShell.classList.contains('is-fallback')) return;
        videoShell.classList.add('is-fallback');
        videoShell.dataset.state = 'fallback';
        if (videoChip) videoChip.textContent = 'FLOW MOTION';
      };
      heroVideo.addEventListener('playing', () => {
        hasStarted = true;
        videoShell.classList.remove('is-fallback');
        videoShell.dataset.state = 'live';
        if (videoChip) videoChip.textContent = 'LIVE CINEMATIC';
      });
      heroVideo.addEventListener('error', activateFallback);
      setTimeout(() => {
        if (!hasStarted || heroVideo.readyState < 2) activateFallback();
      }, 2200);

      heroVideo.play().catch(() => activateFallback());
    }

    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
